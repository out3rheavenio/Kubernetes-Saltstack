{%- set ca_root_dir =  pillar['kubernetes']['ca_root_dir'] -%} 
x509_signing_policies:
  kube-certificates:
    - minions: 'kube-*'
    - signing_private_key: {{ca_root_dir}}/ca.key
    - signing_cert: {{ca_root_dir}}/ca.crt
    - C: US
    - ST: Utah
    - L: Salt Lake City
    - basicConstraints: "critical CA:false"
    - keyUsage: "signing keyEncipherment serverAuth clientAuth"
    - subjectKeyIdentifier: hash
    - authorityKeyIdentifier: keyid,issuer:always
    - days_valid: 90
    - copypath: {{ca_root_dir}}